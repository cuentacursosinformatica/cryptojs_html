<!DOCTYPE html>
<html>
<head>
<title>CryptoJS AES-128 simple</title>
<link rel="icon" href="data:,">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

a.invisible-link {
    color: inherit;
    text-decoration: none;
    cursor: default;
  }

body { 
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  font-size: 16px;
  margin: 0;
  padding: 0;
  background: #f8f9fa;
}

h1 { 
  border-bottom: solid 2px #dee2e6;
  padding-bottom: 12px;
  margin: 0 0 20px 0;
  font-size: 24px;
  color: #212529;
}

div {
  margin-top: 0px;
  margin-bottom: 12px;
  width: 100%;
  padding: 0 16px;
}

.container {
  max-width: 600px;
  margin: 0 auto;
  padding: 20px 0;
  background: white;
  min-height: 100vh;
}

label { 
  width: 100%;
  margin-bottom: 6px;
  display: block;
  font-weight: 600;
  color: #495057;
  font-size: 14px;
}

input, textarea {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  border: 2px solid #ced4da;
  border-radius: 8px;
  margin-top: 4px;
  margin-bottom: 8px;
  font-family: inherit;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus, textarea:focus {
  outline: none;
  border-color: #4a90e2;
  box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
}

textarea {
  resize: vertical;
  min-height: 100px;
  font-family: 'Courier New', monospace;
  font-size: 14px;
}

button {
  width: 100%;
  padding: 16px;
  font-size: 16px;
  font-weight: 600;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  touch-action: manipulation;
}

button:active {
  transform: scale(0.98);
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.btn-cifrar {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  margin-bottom: 12px;
}

.btn-cifrar:hover {
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.btn-descifrar {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: white;
  margin-bottom: 12px;
}

.btn-descifrar:hover {
  box-shadow: 0 4px 12px rgba(245, 87, 108, 0.4);
}

.btn-copiar {
  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  color: white;
}

.btn-copiar:hover {
  box-shadow: 0 4px 12px rgba(79, 172, 254, 0.4);
}

.btn-copiar.copiado {
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
}

.password-container {
  position: relative;
}

.fortaleza-password {
  position: absolute;
  right: 28px;
  top: 38px;
  font-size: 12px;
  font-weight: bold;
  padding: 4px 10px;
  border-radius: 12px;
  display: none;
  z-index: 10;
}

.fortaleza-baja {
  color: #d32f2f;
  background-color: #ffebee;
  border: 1px solid #ffcdd2;
}

.fortaleza-bien {
  color: #f57c00;
  background-color: #fff3e0;
  border: 1px solid #ffe0b2;
}

.fortaleza-mejor {
  color: #388e3c;
  background-color: #e8f5e9;
  border: 1px solid #c8e6c9;
}

.instrucciones {
  background: #e7f3ff;
  padding: 16px;
  border-radius: 0px;
  border-left: 1px solid #cbe1f9;
}

.instrucciones p {
  margin: 0 0 8px 0;
  font-weight: 600;
  color: #2c5aa0;
}

.instrucciones ol {
  margin: 8px 0 0 0;
  padding-left: 20px;
}

.instrucciones li {
  margin: 6px 0;
  color: #495057;
}

footer {
  width: 100%;
  padding: 24px 16px;
  text-align: center;
  background: #f8f9fa;
  border-top: 1px solid #dee2e6;
  font-size: 13px;
  color: #6c757d;
}

footer p {
  margin: 6px 0;
}

.seccion-botones {
  padding: 8px 16px;
}

hr {
  border: none;
  border-top: 1px solid #dee2e6;
  margin: 20px 0;
}

/* Animaci√≥n del icono de copiar */
@keyframes checkmark {
  0% { transform: scale(0.8); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.check-icon {
  animation: checkmark 0.3s ease;
}

/* Mejoras para tablets */
@media (min-width: 768px) {
  .container {
    margin-top: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  
  button {
    padding: 14px;
  }
}

/* Mejoras para pantallas muy peque√±as */
@media (max-width: 360px) {
  body {
    font-size: 14px;
  }
  
  h1 {
    font-size: 20px;
  }
  
  button {
    padding: 14px;
    font-size: 15px;
  }
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>
<script>
function comprobarFortaleza() {
  const password = document.getElementById("tu_password").value;
  const indicador = document.getElementById("fortaleza_indicador");
  const longitud = password.length;
  
  if (longitud === 0) {
    indicador.style.display = "none";
    return;
  }
  
  indicador.style.display = "block";
  indicador.classList.remove("fortaleza-baja", "fortaleza-bien", "fortaleza-mejor");
  
  if (longitud < 12) {
    indicador.textContent = "Baja";
    indicador.classList.add("fortaleza-baja");
  } else if (longitud < 32) {
    indicador.textContent = "Bien";
    indicador.classList.add("fortaleza-bien");
  } else {
    indicador.textContent = "Mejor";
    indicador.classList.add("fortaleza-mejor");
  }
}

function validarCampos() {
  const password = document.getElementById("tu_password").value.trim();
  const password_confirm = document.getElementById("tu_password_confirm").value.trim();
  const mensaje = document.getElementById("mensaje_cifrar").value.trim();
  
  if (password === "") {
    alert("‚ö†Ô∏è Por favor, escribe una contrase√±a");
    document.getElementById("tu_password").focus();
    return false;
  }
  
  if (password_confirm === "") {
    alert("‚ö†Ô∏è Por favor, confirma tu contrase√±a");
    document.getElementById("tu_password_confirm").focus();
    return false;
  }
  
  if (password !== password_confirm) {
    alert("‚ùå Las contrase√±as no coinciden. Por favor, verifica.");
    document.getElementById("tu_password_confirm").focus();
    document.getElementById("tu_password_confirm").select();
    return false;
  }
  
  if (mensaje === "") {
    alert("‚ö†Ô∏è Por favor, escribe un mensaje");
    document.getElementById("mensaje_cifrar").focus();
    return false;
  }
  
  return true;
}

function copiarTextoCifrado(){
  const mensaje_cifrado = document.getElementById("mensaje_cifrado").value;
  const boton = document.getElementById("btn_copiar");
  
  if (mensaje_cifrado !== "") {
    navigator.clipboard.writeText(mensaje_cifrado)
      .then(() => { 
        console.log("Salida copiada");
        boton.innerHTML = '<span class="check-icon">‚úì</span> Copiado';
        boton.classList.add('copiado');
        setTimeout(() => {
          boton.innerHTML = 'üìã Copiar salida';
          boton.classList.remove('copiado');
        }, 2000);
      })
      .catch(err => { 
        console.log("Error al copiar: ", err);
        alert("No se pudo copiar al portapapeles");
      });
  } else {
    alert("‚ö†Ô∏è No hay nada que copiar");
  }
}

function cifrar(){
  if (!validarCampos()) {
    return;
  }
  const password = document.getElementById("tu_password").value;
  const mensaje = document.getElementById("mensaje_cifrar").value;
  const mensaje_cifrado_caja = document.getElementById("mensaje_cifrado");
  const mensaje_cifrado = CryptoJS.AES.encrypt(mensaje, password).toString();
  mensaje_cifrado_caja.value = mensaje_cifrado;
  console.log("Mensaje cifrado exitosamente");
}

function descifrar(){
  if (!validarCampos()) {
    return;
  }
  const password = document.getElementById("tu_password").value;
  const mensaje = document.getElementById("mensaje_cifrar").value;
  const mensaje_cifrado_caja = document.getElementById("mensaje_cifrado");
  
  try {
    const bytes = CryptoJS.AES.decrypt(mensaje, password);
    const mensaje_original = bytes.toString(CryptoJS.enc.Utf8);
    
    if (mensaje_original === "") {
      alert("‚ùå No se pudo descifrar. Verifica la contrase√±a o el mensaje.");
      return;
    }
    
    mensaje_cifrado_caja.value = mensaje_original;
    console.log("Mensaje descifrado exitosamente");
  } catch (error) {
    alert("‚ùå Error al descifrar. Verifica que el mensaje sea v√°lido.");
    console.error(error);
  }
}
</script>
</head>
<body>
<div class="container">
  <div>
    <h1>üîê CryptoJS AES-128 simple</h1>
  </div>
  
  <div class="instrucciones">
    <p>üìù Instrucciones:</p>
    <ol>
      <li>Escribe tu contrase√±a</li>
      <li>Escribe tu mensaje</li>
      <li>Pulsa cifrar o descifrar</li>
    </ol>
  </div>

  <div class="password-container">
    <label for="tu_password">üîë Contrase√±a:</label>
    <input type="password" name="contrase√±a" id="tu_password" placeholder="Escribe tu contrase√±a" oninput="comprobarFortaleza()">
    <span id="fortaleza_indicador" class="fortaleza-password"></span>
  </div>
  
  <div>
    <label for="tu_password_confirm">üîë Repite contrase√±a:</label>
    <input type="password" name="contrase√±a" id="tu_password_confirm" placeholder="Confirma tu contrase√±a">
  </div>

  <div>
    <label for="mensaje_cifrar">üí¨ Mensaje entrada:</label>
    <input type="text" name="mensaje" id="mensaje_cifrar" placeholder="Escribe tu mensaje">
  </div>

  <div class="seccion-botones">
    <button type="button" class="btn-cifrar" onclick="cifrar()">
      üîí Cifrar mensaje
    </button>
    
    <button type="button" class="btn-descifrar" onclick="descifrar()">
      üîì Descifrar mensaje
    </button>
  </div>

  <div>
    <label for="mensaje_cifrado">üì§ Mensaje salida:</label>
    <textarea rows="4" type="text" name="mensaje_cifrado" id="mensaje_cifrado" placeholder="Aqu√≠ aparecer√° el resultado" readonly></textarea>
  </div>
  
  <div>
    <button type="button" class="btn-copiar" id="btn_copiar" onclick="copiarTextoCifrado()">
      üìã Copiar salida
    </button>
  </div>

  <footer>
    <p><strong>Cifrador AES-128</strong></p>
    <p>Usando CryptoJS 4.2.0</p>
    <p style="font-size: 12px; color: #888;">
      ‚ö†Ô∏è Para uso educativo ‚ö†Ô∏è<br>
      No usar para datos cr√≠ticos sin seguridad adicional
    </p>
    <p style="font-size: 10px; color: #999;"><a href="index.html" class="invisible-link">05-12-25</a></p>
  </footer>
</div>
</body>
</html>
